// Code generated by 'gorm.io/cli/gorm'. DO NOT EDIT.

package gen

import (
	"context"
	"strings"

	"github.com/google/uuid"
	"github.com/pixlcrashr/roomy/pkg/db/model"
	"gorm.io/cli/gorm/typed"
	"gorm.io/gorm"
	"gorm.io/gorm/clause"
)

func PlaceMarkerQuery[T any](db *gorm.DB, opts ...clause.Expression) _PlaceMarkerQueryInterface[T] {
	return _PlaceMarkerQueryImpl[T]{
		Interface: typed.G[T](db, opts...),
	}
}

type _PlaceMarkerQueryInterface[T any] interface {
	typed.Interface[T]
	GetByID(ctx context.Context, id uuid.UUID) (*model.PlaceMarker, error)
	ListByArea(ctx context.Context, areaID uuid.UUID) ([]*model.PlaceMarker, error)
	Insert(ctx context.Context, id uuid.UUID, areaID uuid.UUID, placeID uuid.UUID, x float64, y float64, width float64, height float64) error
	Save(ctx context.Context, id uuid.UUID, x float64, y float64, width float64, height float64) error
	Remove(ctx context.Context, id uuid.UUID) error
	DeleteByIDs(ctx context.Context, areaID uuid.UUID, ids []uuid.UUID) error
	DeleteByArea(ctx context.Context, areaID uuid.UUID) error
}

type _PlaceMarkerQueryImpl[T any] struct {
	typed.Interface[T]
}

func (e _PlaceMarkerQueryImpl[T]) GetByID(ctx context.Context, id uuid.UUID) (*model.PlaceMarker, error) {
	var sb strings.Builder
	_params := make([]any, 0, 2)

	sb.WriteString("SELECT * FROM ? WHERE id = ?")
	_params = append(_params, clause.Table{Name: clause.CurrentTable}, id)

	var result *model.PlaceMarker
	err := e.Raw(sb.String(), _params...).Scan(ctx, &result)
	return result, err
}

func (e _PlaceMarkerQueryImpl[T]) ListByArea(ctx context.Context, areaID uuid.UUID) ([]*model.PlaceMarker, error) {
	var sb strings.Builder
	_params := make([]any, 0, 2)

	sb.WriteString("SELECT * FROM ? WHERE area_id = ? ORDER BY created_at")
	_params = append(_params, clause.Table{Name: clause.CurrentTable}, areaID)

	var result []*model.PlaceMarker
	err := e.Raw(sb.String(), _params...).Scan(ctx, &result)
	return result, err
}

func (e _PlaceMarkerQueryImpl[T]) Insert(ctx context.Context, id uuid.UUID, areaID uuid.UUID, placeID uuid.UUID, x float64, y float64, width float64, height float64) error {
	var sb strings.Builder
	_params := make([]any, 0, 8)

	sb.WriteString("INSERT INTO ? (id, area_id, place_id, x, y, width, height, created_at)")
	_params = append(_params, clause.Table{Name: clause.CurrentTable})
	sb.WriteString(" VALUES (?, ?, ?, ?, ?, ?, ?, NOW())")
	_params = append(_params, id, areaID, placeID, x, y, width, height)

	return e.Exec(ctx, sb.String(), _params...)
}

func (e _PlaceMarkerQueryImpl[T]) Save(ctx context.Context, id uuid.UUID, x float64, y float64, width float64, height float64) error {
	var sb strings.Builder
	_params := make([]any, 0, 6)

	sb.WriteString("UPDATE ? SET x = ?, y = ?, width = ?, height = ? WHERE id = ?")
	_params = append(_params, clause.Table{Name: clause.CurrentTable}, x, y, width, height, id)

	return e.Exec(ctx, sb.String(), _params...)
}

func (e _PlaceMarkerQueryImpl[T]) Remove(ctx context.Context, id uuid.UUID) error {
	var sb strings.Builder
	_params := make([]any, 0, 2)

	sb.WriteString("DELETE FROM ? WHERE id = ?")
	_params = append(_params, clause.Table{Name: clause.CurrentTable}, id)

	return e.Exec(ctx, sb.String(), _params...)
}

func (e _PlaceMarkerQueryImpl[T]) DeleteByIDs(ctx context.Context, areaID uuid.UUID, ids []uuid.UUID) error {
	var sb strings.Builder
	_params := make([]any, 0, 3)

	sb.WriteString("DELETE FROM ? WHERE area_id = ? AND id IN (?)")
	_params = append(_params, clause.Table{Name: clause.CurrentTable}, areaID, ids)

	return e.Exec(ctx, sb.String(), _params...)
}

func (e _PlaceMarkerQueryImpl[T]) DeleteByArea(ctx context.Context, areaID uuid.UUID) error {
	var sb strings.Builder
	_params := make([]any, 0, 2)

	sb.WriteString("DELETE FROM ? WHERE area_id = ?")
	_params = append(_params, clause.Table{Name: clause.CurrentTable}, areaID)

	return e.Exec(ctx, sb.String(), _params...)
}
